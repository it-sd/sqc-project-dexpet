<!DOCTYPE html>
<html lang="en">
<%- include('partials/header.ejs') %>
</head>

<!-- First Grid -->
<div class="w3-row-padding w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="w3-twothird">
      <h1>Import</h1>
      <h5 class="w3-padding-32" id="output">Here is where we import games and receive information from the API.</h5>
    </div>

    <div class="w3-third w3-center">
      <p class="w3-text-grey">These API calls are headed to SportRadar's NHL API</p>
      <button class="importBtn"  id="importBtn" type="button">Import Season Schedule</button>
      <button class="goalBtn"  id="goalBtn" type="button">Import Latest Game</button>
      <button class="Test1Btn" id="Test1Btn" type="button">Test1</button>
      <button class="Test2Btn" id="Test2Btn" type="button">Test2</button>
    </div>
  </div>
</div>

<!-- Second Grid -->
<div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="w3-third w3-center">
      <i class="fa fa-coffee w3-padding-64 w3-text-red w3-margin-right"></i>
    </div>

    <div class="w3-twothird">
      <h1>What are we importing?</h1>
      <h5 class="w3-padding-32">Season Schedule & Game Boxscore</h5>

      <p class="w3-text-grey">One button currently only imports the 2022 season schedule for the Capitals. We hope to add functionality so we can grab all games from all seasons that Ovechkin has been in the league for. Once we have all that information in, we will remove the season import button.
        Once that button is gone, we will just have our Game Import button, which currently pings our database, returning a gameID, we then use that to call the API to bring back the game boxscore. Once we have that, it pulls all the goal information to check and see if Ov scored, either way, it updates the record in our database, as long as the game is complete.
      </p>
    </div>
  </div>
</div>

<div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">Quote of the day: Russian Machine Never Break</h1>
</div>


<script>
  const output = document.querySelector('#output')
  const button = document.querySelector('#importBtn')
  button.addEventListener('click', async () => {
    try {
      const response = await fetch('/get-schedule')
      const data = await response.json()
      console.log(data)
      output.textContent = 'The 2022 Season has been imported!'
    } catch (error) {
      console.error(error)
      output.textContent = 'There has been an error in importing.'
    }
  })
  const button1 = document.querySelector('#goalBtn')
  button1.addEventListener('click', async () => {
    try {
      const response = await fetch('/get-goals')
      const data = await response.json()
      console.log(data)
      output.textContent = 'The latest game has been imported.'
    } catch (error) {
      console.error(error)
      output.textContent = 'There has been an error in importing.'
    }
  })
  const button2 = document.querySelector('#Test1Btn')
  button2.addEventListener('click', async () => {
    try {
      const response = await fetch('/get-goals-test1')
      const data = await response.json()
      console.log(data)
      output.textContent = 'The latest game has been imported.'
    } catch (error) {
      console.error(error)
      output.textContent = 'There has been an error in importing.'
    }
  })
  const button3 = document.querySelector('#Test2Btn')
  button3.addEventListener('click', async () => {
    try {
      const response = await fetch('/get-goals-test2')
      const data = await response.json()
      console.log(data)
      output.textContent = 'The latest game has been imported.'
    } catch (error) {
      console.error(error)
      output.textContent = 'There has been an error in importing.'
    }
  })
</script>
</html>